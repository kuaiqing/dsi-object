(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{473:function(t,e,a){"use strict";var n=a(484),r=a.n(n),s=a(146);r.a.defaults.withCredentials=!0;var i=r.a.create({timeout:6e4});i.interceptors.request.use((function(t){if(t.params)for(var e in t.params)"string"==typeof t.params[e]&&(t.params[e]=encodeURI(t.params[e]));return t}),(function(t){return Object(s.Message)({message:t.message,type:"error"}),Promise.reject()})),i.interceptors.response.use((function(t){if(200===t.status)return(t.data.status&&500==t.data.status||!t.data.success)&&Object(s.Message)({message:t.data.message,type:"error"}),t.data.status&&234==t.data.status&&(window.location.href="http://"+window.location.host+"/#/login"),t.data}),(function(t){return Object(s.Message)({message:t.message,type:"error"}),Promise.reject()}));var o=i,l="http://172.16.132.48:8088/dsi",c={};function u(t,e){t.save=function(t){return o({url:l+"/info/".concat(e,"/save"),method:"post",data:t})},t.list=function(){return o({url:l+"/info/".concat(e,"/list"),method:"get"})},t.delete=function(t){return o({url:l+"/info/".concat(e,"/delete/").concat(t),method:"post"})},t.batchDelete=function(t){return o({url:l+"/info/".concat(e,"/batch/delete"),method:"post",data:t})},t.copy=function(t){return o({url:l+"/info/".concat(e,"/copy"),method:"post",data:t})}}c.group={},u(c.group,"group"),c.group.getTargetList=function(t){return o({url:l+"/info/group/target",method:"get",params:t})},c.target={},u(c.target,"target"),c.target.getPointList=function(t){return o({url:l+"/info/target/point",method:"get",params:t})},c.point={},u(c.point,"point"),c.pointScheduler={},c.pointScheduler.include=function(t){return o({url:l+"/point/scheduler/include",method:"get",params:t})},c.pointScheduler.exclude=function(t){return o({url:l+"/point/scheduler/exclude",method:"get",params:t})},c.pointScheduler.batchSave=function(t){return o({url:l+"/point/scheduler/batch/save",method:"post",data:t})},c.pointScheduler.delete=function(t){return o({url:l+"/point/scheduler/delete",method:"post",data:t})},c.pointScheduler.batchDelete=function(t){return o({url:l+"/point/scheduler/batch/delete",method:"post",data:t})},c.handler={},c.handler.list=function(){return o({url:l+"/info/handler/list",method:"get"})},c.scheduler={},u(c.scheduler,"scheduler"),c.scheduler.getPointList=function(t){return o({url:l+"/info/scheduler/point",method:"get",params:t})},c.getAllStatus=function(){return o({url:l+"/result/summary",method:"get"})},c.getResultList=function(t){return o({url:l+"/result/list",method:"get",params:t})},c.getAlarmsCount=function(){return o({url:l+"/result/alert",method:"get"})},c.exportExcel=function(){return l+"/result/excel"},c.getHistoryDiskfree=function(t){return o({url:l+"/result/history/disk/free",method:"get",params:t})},c.getHistoryHttpService=function(t){return o({url:l+"/result/history/http/service",method:"get",params:t})},c.getHistoryProcessStatus=function(t){return o({url:l+"/result/history/process/status",method:"get",params:t})},c.getHistoryRecordNumber=function(t){return o({url:l+"/result/history/record/number",method:"get",params:t})};e.a=c},492:function(t,e,a){t.exports=a.p+"img/image/root.7a61993.png"},493:function(t,e,a){t.exports=a.p+"img/image/group.d33328a.png"},494:function(t,e,a){t.exports=a.p+"img/image/groupSelected.8576644.png"},521:function(t,e,a){},546:function(t,e,a){},547:function(t,e,a){},548:function(t,e,a){},655:function(t,e,a){"use strict";var n=a(521);a.n(n).a},662:function(t,e){},664:function(t,e){},674:function(t,e){},676:function(t,e){},701:function(t,e){},703:function(t,e){},704:function(t,e){},709:function(t,e){},711:function(t,e){},718:function(t,e){},720:function(t,e){},738:function(t,e){},740:function(t,e){},752:function(t,e){},755:function(t,e){},781:function(t,e,a){"use strict";var n=a(546);a.n(n).a},782:function(t,e,a){"use strict";var n=a(547);a.n(n).a},783:function(t,e,a){"use strict";var n=a(548);a.n(n).a},803:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:4}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"cardHeader"},[a("span",[t._v("对象分组")])]),t._v(" "),a("div",{staticClass:"cardBody"},[a("GroupTree",{attrs:{groupInfo:t.groupInfo,handleNodeClick:t.handleNodeClick}})],1)])],1),t._v(" "),a("el-col",{attrs:{span:20}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"cardHeader"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-button",{staticClass:"vbi-button",attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:t.addTarget}},[t._v("新增")]),t._v(" "),a("el-button",{staticClass:"vbi-button",attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:t.copyTarget}},[t._v("复制")]),t._v(" "),a("el-button",{staticClass:"vbi-button",attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:t.batchDeleteTarget}},[t._v("删除")])],1),t._v(" "),a("el-col",{staticStyle:{"text-align":"right","padding-right":"10px"},attrs:{span:12}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"small",placeholder:"对象名称",clearable:""},model:{value:t.searchData.targetName,callback:function(e){t.$set(t.searchData,"targetName",e)},expression:"searchData.targetName"}}),t._v(" "),a("el-button",{staticClass:"vbi-button",attrs:{type:"primary",size:"small",icon:"el-icon-search",plain:""},on:{click:t.onSearch}},[t._v("查询")])],1)],1)],1),t._v(" "),a("div",{staticClass:"cardBody"},[a("el-table",{attrs:{height:t.tableMaxHeight,data:t.targetList,border:"",stripe:!0},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"对象名称",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"对象分组",prop:"group.name"}}),t._v(" "),a("el-table-column",{attrs:{label:"对象类型",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",[t._v(t._s(t.getTypeName(e.row.targetType)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"地址(连接串)"},scopedSlots:t._u([{key:"default",fn:function(e){return["Db"==e.row.targetType?a("span",[t._v(t._s(e.row.url))]):t._e(),t._v(" "),"Db"!=e.row.targetType?a("span",[t._v(t._s(e.row.host))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"端口",prop:"port",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{label:"用户名",prop:"username",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"安全连接",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.ssl?t._e():a("el-tag",{attrs:{type:"success"}},[t._v("禁用")]),t._v(" "),e.row.ssl?a("el-tag",{attrs:{type:"danger"}},[t._v("启用")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"是否禁用",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{value:e.row.disable,"active-color":"#ff4949","inactive-color":"#13ce66"},on:{change:function(a){return t.handleChangeStatus(a,e.row)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"linkButton",attrs:{size:"mini",type:"text"},on:{click:function(a){return t.handleEditTarget(e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{staticClass:"linkButton danger",attrs:{size:"mini",type:"text"},on:{click:function(a){return t.handleDeleteTarget(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticStyle:{float:"right"}},[a("el-pagination",{attrs:{"current-page":t.pageInfo.page,"page-size":t.pageInfo.size,layout:"prev, pager, next,total",total:t.pageInfo.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){return t.$set(t.pageInfo,"page",e)},"update:current-page":function(e){return t.$set(t.pageInfo,"page",e)}}})],1)],1)])],1)],1),t._v(" "),a("EditTarget",{attrs:{visible:t.dlgEditTarget,targetData:t.selectTargetData,groupList:t.groupInfo.list},on:{close:function(e){t.dlgEditTarget=!1},save:t.handleSaveTarget}}),t._v(" "),a("CopyTarget",{attrs:{visible:t.dlgCopyTarget,targetDatas:t.multipleSelection},on:{close:function(e){t.dlgCopyTarget=!1},save:t.handleCopyTargetSave}})],1)};n._withStripped=!0;var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"100%",width:"100%"}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"treecomponent",attrs:{data:t.groupData,props:t.defaultProps,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"highlight-current":!0},on:{"node-click":t.handleTreeNodeClick,"node-contextmenu":t.handleNodeContextmenu},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.node,r=e.data;return a("span",{staticClass:"custom-node"},[a("span",[a("img",{directives:[{name:"show",rawName:"v-show",value:!r.id,expression:"!data.id"}],staticStyle:{"vertical-align":"middle"},attrs:{src:t.root,width:"18",height:"18"}}),t._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:r.id&&!n.isCurrent,expression:"data.id&&!node.isCurrent"}],staticStyle:{"vertical-align":"middle"},attrs:{src:t.group,width:"18",height:"18"}}),t._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:r.id&&n.isCurrent,expression:"data.id&&node.isCurrent"}],staticStyle:{"vertical-align":"middle"},attrs:{src:t.groupSelected,width:"18",height:"18"}}),t._v(" "),a("span",{staticStyle:{"vertical-align":"middle","margin-left":"2px"}},[t._v(t._s(r.code?n.label+"["+r.code+"]":n.label))])])])}}])}),t._v(" "),a("vue-context-menu",{ref:"contextMenu",staticClass:"vue-context-menu",attrs:{contextMenuData:t.contextMenuData},on:{addGroup:t.onCreate,deleteGroup:t.onDelete,editGroup:t.onEdit}}),t._v(" "),a("el-dialog",{staticClass:"vbi-form",attrs:{title:t.title,"close-on-click-modal":!1,visible:t.dlgVisible,width:"300px"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.currentData}},[a("el-form-item",{attrs:{label:"分组编码"}},[a("el-input",{attrs:{placeholder:"请输入分组编码"},model:{value:t.currentData.code,callback:function(e){t.$set(t.currentData,"code",e)},expression:"currentData.code"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分组名称"}},[a("el-input",{attrs:{placeholder:"请输入分组名称"},model:{value:t.currentData.name,callback:function(e){t.$set(t.currentData,"name",e)},expression:"currentData.name"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"vbi-button",on:{click:function(e){t.dlgVisible=!1}}},[t._v("关闭")]),t._v(" "),a("el-button",{staticClass:"vbi-button",attrs:{type:"primary"},on:{click:t.handleSave}},[t._v("确定")])],1)],1)],1)};r._withStripped=!0;a(206);var s=a(473),i={name:"home",props:{handleNodeClick:{type:Function,default:null},groupInfo:{type:Object,default:null}},data:function(){return{defaultProps:{children:"children",label:"name"},contextMenuData:{menuName:"demo",axis:{x:null,y:null},menulists:[{fnHandler:"onCreateDir",icoName:"el-icon-plus",btnName:"新增"},{fnHandler:"onEditDir",icoName:"el-icon-edit",btnName:"编辑"},{fnHandler:"onDeleteDir",icoName:"el-icon-delete",btnName:"删除"}]},root:a(492),group:a(493),groupSelected:a(494),currentNode:{},currentData:{code:"",name:""},title:"新增分组",dlgVisible:!1,loading:!1,groupData:[{name:"巡检对象分组",children:[]}]}},mounted:function(){this.getGroupList(),this.handleNodeClick({id:""})},computed:{},methods:{getGroupList:function(){var t=this;s.a.group.list().then((function(e){e.success&&(t.groupData[0].children=e.data,t.groupInfo.list=e.data)}))},onCreate:function(){this.dlgVisible=!0,this.currentData={code:"",name:""}},onEdit:function(){this.dlgVisible=!0},onDelete:function(){var t=this;this.loading=!0,this.$confirm("确定要删除该分组信息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){s.a.group.delete(t.currentData.id).then((function(e){e.success&&(t.$message({message:"成功删除分组！",type:"success"}),t.$refs.treecomponent.remove(t.currentData)),t.loading=!1}))}))},handleSave:function(){var t=this;this.loading=!0,s.a.group.save(this.currentData).then((function(e){t.loading=!1,e.success&&(t.currentData.id?(t.$message({message:"成功修改分组！",type:"success"}),t.currentNode.data=e.data):(t.$message({message:"成功新增分组！",type:"success"}),t.groupData[0].children.push(e.data)),t.dlgVisible=!1)}))},handleTreeNodeClick:function(t){this.handleNodeClick&&this.handleNodeClick(t)},handleNodeContextmenu:function(t,e,a){t.preventDefault(),this.currentNode=a,this.currentData.id=a.data.id,this.currentData.name=a.data.name,this.currentData.code=a.data.code;var n=t.clientX,r=t.clientY;e.id?this.contextMenuData.menulists=[{fnHandler:"editGroup",icoName:"el-icon-edit",btnName:"编辑"},{fnHandler:"deleteGroup",icoName:"el-icon-delete",btnName:"删除"}]:this.contextMenuData.menulists=[{fnHandler:"addGroup",icoName:"el-icon-plus",btnName:"新增"}];var s=53*this.contextMenuData.menulists.length,i=(window.innerWidth,window.innerHeight),o=(r+s>i?i-s:r)+"px";this.contextMenuData.axis={x:n,y:r+o},this.$refs.contextMenu.$el.style.top=o}}},o=(a(655),a(145)),l=Object(o.a)(i,r,[],!1,null,"e6c8b82a",null);l.options.__file="src/views/checktarget/component/grouptree.vue";var c=l.exports,u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"vbi-form",attrs:{title:t.title,"close-on-click-modal":!1,visible:t.visible,width:"600px"},on:{open:t.initialize,close:t.handleClose}},[a("el-form",{ref:"form",attrs:{model:t.targetData,"label-width":"100px",rules:t.rules}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:t.targetData.name,callback:function(e){t.$set(t.targetData,"name",e)},expression:"targetData.name"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"版本号",prop:"version"}},[a("el-input",{model:{value:t.targetData.version,callback:function(e){t.$set(t.targetData,"version",e)},expression:"targetData.version"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"类型",prop:"targetType"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.targetData.targetType,callback:function(e){t.$set(t.targetData,"targetType",e)},expression:"targetData.targetType"}},t._l(t.typeOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"分组",prop:"group.id"}},[a("el-select",{attrs:{placeholder:"请选择分组"},model:{value:t.targetData.group.id,callback:function(e){t.$set(t.targetData.group,"id",e)},expression:"targetData.group.id"}},t._l(t.groupList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:t.targetData.username,callback:function(e){t.$set(t.targetData,"username",e)},expression:"targetData.username"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:t.fakePassword,callback:function(e){t.fakePassword=e},expression:"fakePassword"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},["Db"!=t.targetData.targetType?a("el-form-item",{attrs:{label:"地址",prop:"host"}},[a("el-input",{model:{value:t.targetData.host,callback:function(e){t.$set(t.targetData,"host",e)},expression:"targetData.host"}})],1):t._e(),t._v(" "),"Db"==t.targetData.targetType?a("el-form-item",{attrs:{label:"连接串",prop:"url"}},[a("el-input",{staticStyle:{width:"480px"},model:{value:t.targetData.url,callback:function(e){t.$set(t.targetData,"url",e)},expression:"targetData.url"}})],1):t._e()],1),t._v(" "),a("el-col",{attrs:{span:12}},["Db"!=t.targetData.targetType?a("el-form-item",{attrs:{label:"端口",prop:"port"}},[a("el-input-number",{staticClass:"target-port",staticStyle:{width:"180px"},attrs:{controls:!1,step:1,precision:0,min:1,max:1e6,label:"端口"},model:{value:t.targetData.port,callback:function(e){t.$set(t.targetData,"port",e)},expression:"targetData.port"}})],1):t._e()],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",[a("el-switch",{attrs:{"active-color":"#ff4949","inactive-color":"#13ce66","inactive-text":"不加密","active-text":"SSL加密"},model:{value:t.targetData.ssl,callback:function(e){t.$set(t.targetData,"ssl",e)},expression:"targetData.ssl"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"状态",prop:"disable"}},[a("el-switch",{attrs:{"active-color":"#ff4949","inactive-color":"#13ce66","inactive-text":"启用","active-text":"禁用"},model:{value:t.targetData.disable,callback:function(e){t.$set(t.targetData,"disable",e)},expression:"targetData.disable"}})],1)],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{loading:t.beginSave,type:"primary"},on:{click:t.handleSaveTarget}},[t._v("确 定")])],1)],1)};u._withStripped=!0;a(208);var d=a(656),p=a.n(d),g={key:"6e6757620d3fcbfc",aesEncrypt:function(t,e){e=p.a.enc.Utf8.parse(e||this.key);var a={mode:p.a.mode.ECB,padding:p.a.pad.Pkcs7};return p.a.AES.encrypt(t,e,a).toString()},aesDecrypt:function(t,e){e=p.a.enc.Utf8.parse(e||this.key);var a={mode:p.a.mode.ECB,padding:p.a.pad.Pkcs7};return p.a.AES.decrypt(t,e,a).toString(p.a.enc.Utf8)}},h={name:"editTarget",props:{visible:{type:Boolean,default:!1},targetData:{type:Object,default:{}},groupList:{type:Array,default:[]}},data:function(){return{title:"新增巡检对象",beginSave:!1,rules:{name:{required:!0,message:"请输入对象名称",trigger:"blur"},username:{required:!0,message:"请输入用户名",trigger:"blur"},host:{required:!0,message:"请输入地址",trigger:"blur"},url:{required:!0,message:"请输入连接串",trigger:"blur"}},defaultPassword:"!@#$%^&132765@@%%aqw",fakePassword:"!@#$%^&132765@@%%aqw",typeOptions:[{label:"服务器",value:"Server"},{label:"数据库",value:"Db"},{label:"HTTP服务",value:"Http"}]}},methods:{initialize:function(){this.fakePassword=this.defaultPassword,this.targetData.id?this.title="修改巡检对象:"+this.targetData.name:this.title="新增巡检对象"},handleSaveTarget:function(){var t=this;if(!this.beginSave){if(this.beginSave=!0,this.fakePassword!=this.defaultPassword)this.targetData.password=g.aesEncrypt(this.fakePassword,"");else if(!this.targetData.id&&"Http"!=this.targetData.targetType)return this.$message({message:"必须输入用户密码！",type:"warning"}),void(this.beginSave=!1);"Db"==this.targetData.targetType&&(this.targetData.port=null),this.$refs.form.validate((function(e){e?s.a.target.save(t.targetData).then((function(e){t.beginSave=!1,e.success&&(t.targetData.id?t.$message({message:"成功修改巡检对象！",type:"success"}):t.$message({message:"成功新增巡检对象！",type:"success"}),t.$emit("save"))})):t.beginSave=!1}))}},handleClose:function(){this.$emit("close")}}},m=(a(781),Object(o.a)(h,u,[],!1,null,"9b07e286",null));m.options.__file="src/views/checktarget/component/edittarget.vue";var f=m.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"vbi-form",attrs:{title:"复制对象","close-on-click-modal":!1,visible:t.visible,width:"700px"},on:{open:t.initialize,close:t.handleClose}},[a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:8}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("选择目标对象")])]),t._v(" "),a("div",{staticClass:"treeDiv"},[a("GroupTree",{attrs:{groupInfo:t.groupInfo,handleNodeClick:t.handleNodeClick}})],1)])],1),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("修改属性：名称必须唯一")])]),t._v(" "),a("el-table",{attrs:{height:600,data:t.targetDatas,border:"",stripe:!0}},[a("el-table-column",{attrs:{label:"名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.name,callback:function(a){t.$set(e.row,"name",a)},expression:"scope.row.name"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"IP地址",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.host,callback:function(a){t.$set(e.row,"host",a)},expression:"scope.row.host"}})]}}])})],1)],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{loading:t.beginSave,type:"primary"},on:{click:t.handleSaveTarget}},[t._v("确 定")])],1)],1)};v._withStripped=!0;a(209);var b={name:"CopyTarget",components:{GroupTree:c},props:{visible:{type:Boolean,default:!1},targetDatas:{type:Array,default:[]}},data:function(){return{beginSave:!1,groupInfo:{list:[]},group:{id:"",name:""}}},methods:{initialize:function(){console.log("open")},handleNodeClick:function(t){console.log("data",t),this.group.id=t.id||"",this.group.name=t.name||""},handleSaveTarget:function(){var t=this;this.beginSave||(this.group.id?(this.beginSave=!0,this.targetDatas.forEach((function(e){return e.group=t.group})),s.a.target.copy(this.targetDatas).then((function(e){t.beginSave=!1,e.success&&(t.$message({message:"成功复制巡检对象！",type:"success"}),t.$emit("save"),t.handleClose())})).catch((function(){t.beginSave=!1}))):this.$message({message:"请选择目标对象！",type:"warning"}))},handleClose:function(){this.$emit("close")}}},y=(a(782),Object(o.a)(b,v,[],!1,null,"78f2baf0",null));y.options.__file="src/views/checktarget/component/copyTarget.vue";var D={name:"home",components:{GroupTree:c,EditTarget:f,CopyTarget:y.exports},data:function(){return{targetList:[],groupInfo:{list:[]},selectGroup:{id:"",name:""},searchData:{targetName:""},pageInfo:{page:1,size:15,total:0},dlgEditTarget:!1,dlgCopyTarget:!1,selectTargetData:{name:"",group:{id:"",name:""},targetType:"",version:"",host:"",port:1,url:"",username:"",password:"",ssl:!1,disable:!1},multipleSelection:[]}},created:function(){},computed:{tableMaxHeight:function(){return window.innerHeight-180+"px"}},methods:{addTarget:function(){this.selectGroup.id?(this.dlgEditTarget=!0,this.selectTargetData={name:"",group:{id:this.selectGroup.id},targetType:"Server",version:"",host:"",port:22,url:"",username:"",password:"",ssl:!1,disable:!1}):this.$message({message:"必须选择对象分组，才能新增巡检对象！",type:"warning"})},copyTarget:function(){!this.multipleSelection||this.multipleSelection.length<1?this.$message({message:"请选择要复制的对象！",type:"warning"}):this.dlgCopyTarget=!0},batchDeleteTarget:function(){var t=this;!this.multipleSelection||this.multipleSelection.length<1?this.$message({message:"请选择要删除的对象！",type:"warning"}):this.$confirm("确定要删除所选巡检对象?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=t.multipleSelection.map((function(t){return t.id}));s.a.target.batchDelete(e).then((function(e){e.success&&(t.$message({message:"成功删除巡检对象！",type:"success"}),t.getDataList())}))}))},handleSelectionChange:function(t){this.multipleSelection=JSON.parse(JSON.stringify(t))},handleNodeClick:function(t){this.selectGroup=t,this.getDataList()},getDataList:function(){var t=this,e={page:this.pageInfo.page-1,size:this.pageInfo.size};this.selectGroup.id&&(e.id=this.selectGroup.id),this.searchData.targetName&&(e.name=this.searchData.targetName),s.a.group.getTargetList(e).then((function(e){e.success&&(t.targetList=e.data.content,t.pageInfo.total=e.data.totalElements)}))},handleCurrentChange:function(t){},onSearch:function(){var t=this,e={page:0,size:this.pageInfo.size};this.searchData.targetName&&(e.name=this.searchData.targetName),s.a.group.getTargetList(e).then((function(e){e.success&&(t.targetList=e.data.content,t.pageInfo.total=e.data.totalElements)}))},getTypeName:function(t){return"Server"==t?"服务器":"Db"==t?"数据库":"Http"==t?"HTTP服务":""},handleSaveTarget:function(){this.dlgEditTarget=!1,this.getDataList()},handleCopyTargetSave:function(){console.log("CopyTargetSave")},handleEditTarget:function(t){this.dlgEditTarget=!0,this.selectTargetData=JSON.parse(JSON.stringify(t))},handleDeleteTarget:function(t){var e=this;this.$confirm("确定要删除该巡检对象信息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){s.a.target.delete(t.id).then((function(t){t.success&&(e.$message({message:"成功删除巡检对象！",type:"success"}),e.getDataList())}))}))},handleChangeStatus:function(t,e){var a=this;e.disable=t,s.a.target.save(e).then((function(t){t.success&&a.$message({message:"成功修改巡检对象！",type:"success"})}))}}},_=(a(783),Object(o.a)(D,n,[],!1,null,"da81199c",null));_.options.__file="src/views/checktarget/index.vue";e.default=_.exports}}]);